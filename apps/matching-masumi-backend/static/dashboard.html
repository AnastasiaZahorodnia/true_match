<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Job Matching Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .jobs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .job-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #667eea;
            transition: transform 0.2s;
        }

        .job-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .job-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-confirmed {
            background: #d4edda;
            color: #155724;
        }

        .status-failed {
            background: #f8d7da;
            color: #721c24;
        }

        .status-completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .job-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .job-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .job-skills {
            margin-bottom: 15px;
        }

        .skill-tag {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin: 2px;
        }

        .candidates-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }

        .candidate-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .fit-score {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .fit-excellent {
            background: #d4edda;
            color: #155724;
        }

        .fit-good {
            background: #fff3cd;
            color: #856404;
        }

        .fit-poor {
            background: #f8d7da;
            color: #721c24;
        }

        .candidate-name {
            font-weight: 600;
            color: #333;
        }

        .matching-skills {
            color: #28a745;
            font-size: 14px;
        }

        .missing-skills {
            color: #dc3545;
            font-size: 14px;
        }

        .verified-badge {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 10px;
            margin-left: 5px;
        }

        .candidates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .candidate-profile {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            transition: transform 0.2s;
        }

        .candidate-profile:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .skill-verification {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .verification-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .verified {
            background: #d4edda;
            color: #155724;
        }

        .unverified {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ AI-Powered Job Matching</h1>
            <p>Intelligent candidate matching with skill verification</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('jobs')">üìã Jobs</button>
            <button class="nav-tab" onclick="showTab('candidates')">üë• Candidates</button>
            <button class="nav-tab" onclick="showTab('matching')">üéØ AI Matching</button>
            <button class="nav-tab" onclick="showTab('verification')">‚úÖ Skill Verification</button>
        </div>

        <!-- Jobs Tab -->
        <div id="jobs" class="tab-content active">
            <div class="section">
                <h2>üìã Post New Job</h2>
                <form id="jobForm">
                    <div class="form-group">
                        <label for="jobTitle">Job Title</label>
                        <input type="text" id="jobTitle" name="jobTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="jobDescription">Job Description</label>
                        <textarea id="jobDescription" name="jobDescription" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="requiredSkills">Required Skills (comma-separated)</label>
                        <input type="text" id="requiredSkills" name="requiredSkills" placeholder="Python, FastAPI, Docker, PostgreSQL">
                    </div>
                    <button type="submit" class="btn">üöÄ Post Job</button>
                </form>
            </div>

            <div class="section">
                <h2>üìä Job Statistics</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalJobs">0</div>
                        <div class="stat-label">Total Jobs</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="activeJobs">0</div>
                        <div class="stat-label">Active Jobs</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalCandidates">0</div>
                        <div class="stat-label">Candidates</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avgFitScore">0%</div>
                        <div class="stat-label">Avg Fit Score</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üìã All Jobs</h2>
                <div id="jobsList" class="jobs-grid">
                    <div class="loading">Loading jobs...</div>
                </div>
            </div>
        </div>

        <!-- Candidates Tab -->
        <div id="candidates" class="tab-content">
            <div class="section">
                <h2>üë• Add Candidate</h2>
                <form id="candidateForm">
                    <div class="form-group">
                        <label for="candidateName">Full Name</label>
                        <input type="text" id="candidateName" name="candidateName" required>
                    </div>
                    <div class="form-group">
                        <label for="candidateEmail">Email</label>
                        <input type="email" id="candidateEmail" name="candidateEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="candidateSkills">Skills (comma-separated)</label>
                        <input type="text" id="candidateSkills" name="candidateSkills" placeholder="Python, JavaScript, React">
                    </div>
                    <div class="form-group">
                        <label for="githubUsername">GitHub Username (optional)</label>
                        <input type="text" id="githubUsername" name="githubUsername">
                    </div>
                    <div class="form-group">
                        <label for="experienceYears">Years of Experience</label>
                        <input type="number" id="experienceYears" name="experienceYears" min="0" max="50">
                    </div>
                    <button type="submit" class="btn">‚ûï Add Candidate</button>
                </form>
            </div>

            <div class="section">
                <h2>üë• All Candidates</h2>
                <div id="candidatesList" class="candidates-grid">
                    <div class="loading">Loading candidates...</div>
                </div>
            </div>
        </div>

        <!-- AI Matching Tab -->
        <div id="matching" class="tab-content">
            <div class="section">
                <h2>üéØ AI-Powered Matching</h2>
                <p>View detailed Fit % scores and skill analysis for each job-candidate combination.</p>
                
                <div class="form-group">
                    <label for="jobSelect">Select Job to View Matches</label>
                    <select id="jobSelect" onchange="loadJobMatches()">
                        <option value="">Choose a job...</option>
                    </select>
                </div>
            </div>

            <div class="section">
                <h2>üìä Match Results</h2>
                <div id="matchResults">
                    <div class="loading">Select a job to view matches...</div>
                </div>
            </div>
        </div>

        <!-- Skill Verification Tab -->
        <div id="verification" class="tab-content">
            <div class="section">
                <h2>‚úÖ Skill Verification</h2>
                <p>Verify candidate skills using AI analysis of GitHub, LinkedIn, and other sources.</p>
                
                <div class="form-group">
                    <label for="verifyCandidate">Select Candidate</label>
                    <select id="verifyCandidate" onchange="loadCandidateSkills()">
                        <option value="">Choose a candidate...</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="verifySkill">Select Skill to Verify</label>
                    <select id="verifySkill">
                        <option value="">Choose a skill...</option>
                    </select>
                </div>
                
                <button onclick="verifySkill()" class="btn btn-success">üîç Verify Skill</button>
            </div>

            <div class="section">
                <h2>üîç Verification Results</h2>
                <div id="verificationResults">
                    <div class="loading">Select a candidate and skill to verify...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let jobs = [];
        let candidates = [];

        // Tab navigation
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Load data for the tab
            if (tabName === 'jobs') {
                loadJobs();
            } else if (tabName === 'candidates') {
                loadCandidates();
            } else if (tabName === 'matching') {
                loadJobsForMatching();
            } else if (tabName === 'verification') {
                loadCandidatesForVerification();
            }
        }

        // Job form submission
        document.getElementById('jobForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const jobData = {
                identifier_from_purchaser: `employer_${Date.now()}`,
                input_data: {
                    text: formData.get('jobTitle') + ': ' + formData.get('jobDescription'),
                    skills: formData.get('requiredSkills')
                }
            };

            try {
                const response = await fetch('/start_job', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(jobData)
                });

                if (response.ok) {
                    showNotification('Job posted successfully!', 'success');
                    e.target.reset();
                    loadJobs();
                } else {
                    const error = await response.json();
                    showNotification('Error posting job: ' + error.detail, 'error');
                }
            } catch (error) {
                showNotification('Error posting job: ' + error.message, 'error');
            }
        });

        // Candidate form submission
        document.getElementById('candidateForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const skills = formData.get('candidateSkills').split(',').map(s => s.trim()).filter(s => s);
            
            const candidateData = {
                candidate_id: `candidate_${Date.now()}`,
                name: formData.get('candidateName'),
                email: formData.get('candidateEmail'),
                skills: skills.map(skill => ({
                    name: skill,
                    level: 'intermediate',
                    verified: false
                })),
                github_username: formData.get('githubUsername'),
                experience_years: parseInt(formData.get('experienceYears')) || 0
            };

            try {
                const response = await fetch('/candidates', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(candidateData)
                });

                if (response.ok) {
                    showNotification('Candidate added successfully!', 'success');
                    e.target.reset();
                    loadCandidates();
                } else {
                    const error = await response.json();
                    showNotification('Error adding candidate: ' + error.detail, 'error');
                }
            } catch (error) {
                showNotification('Error adding candidate: ' + error.message, 'error');
            }
        });

        // Load jobs
        async function loadJobs() {
            try {
                const response = await fetch('/jobs');
                const data = await response.json();
                
                if (data.status === 'success') {
                    jobs = data.jobs;
                    displayJobs(jobs);
                    updateStats();
                }
            } catch (error) {
                showNotification('Error loading jobs: ' + error.message, 'error');
            }
        }

        // Display jobs
        function displayJobs(jobsToDisplay) {
            const jobsList = document.getElementById('jobsList');
            
            if (jobsToDisplay.length === 0) {
                jobsList.innerHTML = '<div class="loading">No jobs found</div>';
                return;
            }

            jobsList.innerHTML = jobsToDisplay.map(job => `
                <div class="job-card">
                    <div class="job-status status-${job.status}">${job.status}</div>
                    <div class="job-title">${job.input_data.text}</div>
                    <div class="job-description">Posted by: ${job.identifier_from_purchaser}</div>
                    
                    ${job.skills && job.skills.length > 0 ? `
                        <div class="job-skills">
                            <strong>Required Skills:</strong><br>
                            ${job.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                        </div>
                    ` : ''}
                    
                    <div class="job-meta">
                        <span>Created: ${new Date(job.created_at).toLocaleDateString()}</span>
                        <span>${job.total_candidates || 0} candidates</span>
                    </div>
                    
                    ${job.candidate_matches && job.candidate_matches.length > 0 ? `
                        <div class="candidates-section">
                            <strong>Top Matches:</strong>
                            ${job.candidate_matches.slice(0, 3).map(candidate => `
                                <div class="candidate-card">
                                    <span class="candidate-name">${candidate.candidate_name}</span>
                                    <span class="fit-score fit-${getFitClass(candidate.fit_percentage)}">${candidate.fit_percentage}%</span>
                                    <div class="matching-skills">‚úì ${candidate.matching_skills.join(', ')}</div>
                                    ${candidate.missing_skills.length > 0 ? `<div class="missing-skills">‚úó Missing: ${candidate.missing_skills.join(', ')}</div>` : ''}
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Get fit score class
        function getFitClass(percentage) {
            if (percentage >= 80) return 'excellent';
            if (percentage >= 60) return 'good';
            return 'poor';
        }

        // Update statistics
        function updateStats() {
            document.getElementById('totalJobs').textContent = jobs.length;
            document.getElementById('activeJobs').textContent = jobs.filter(job => job.status === 'awaiting_payment' || job.status === 'running').length;
            document.getElementById('totalCandidates').textContent = candidates.length;
            
            const allScores = jobs.flatMap(job => job.candidate_matches || []).map(match => match.fit_percentage);
            const avgScore = allScores.length > 0 ? Math.round(allScores.reduce((a, b) => a + b, 0) / allScores.length) : 0;
            document.getElementById('avgFitScore').textContent = avgScore + '%';
        }

        // Load candidates
        async function loadCandidates() {
            try {
                // For now, we'll use mock data since we don't have a /candidates endpoint
                candidates = [
                    {
                        candidate_id: 'candidate_1',
                        name: 'John Doe',
                        email: 'john@example.com',
                        skills: [
                            { name: 'Python', level: 'advanced', verified: true },
                            { name: 'FastAPI', level: 'intermediate', verified: false },
                            { name: 'JavaScript', level: 'beginner', verified: false }
                        ],
                        experience_years: 3
                    },
                    {
                        candidate_id: 'candidate_2',
                        name: 'Jane Smith',
                        email: 'jane@example.com',
                        skills: [
                            { name: 'Python', level: 'intermediate', verified: true },
                            { name: 'Docker', level: 'advanced', verified: true },
                            { name: 'PostgreSQL', level: 'intermediate', verified: false }
                        ],
                        experience_years: 5
                    }
                ];
                
                displayCandidates(candidates);
                updateStats();
            } catch (error) {
                showNotification('Error loading candidates: ' + error.message, 'error');
            }
        }

        // Display candidates
        function displayCandidates(candidatesToDisplay) {
            const candidatesList = document.getElementById('candidatesList');
            
            if (candidatesToDisplay.length === 0) {
                candidatesList.innerHTML = '<div class="loading">No candidates found</div>';
                return;
            }

            candidatesList.innerHTML = candidatesToDisplay.map(candidate => `
                <div class="candidate-profile">
                    <h3>${candidate.name}</h3>
                    <p>${candidate.email}</p>
                    <p><strong>Experience:</strong> ${candidate.experience_years} years</p>
                    
                    <div class="job-skills">
                        <strong>Skills:</strong><br>
                        ${candidate.skills.map(skill => `
                            <span class="skill-tag">
                                ${skill.name}
                                ${skill.verified ? '<span class="verified-badge">‚úì</span>' : ''}
                            </span>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Load jobs for matching dropdown
        function loadJobsForMatching() {
            const jobSelect = document.getElementById('jobSelect');
            jobSelect.innerHTML = '<option value="">Choose a job...</option>';
            
            jobs.forEach(job => {
                const option = document.createElement('option');
                option.value = job.job_id;
                option.textContent = job.input_data.text.substring(0, 50) + '...';
                jobSelect.appendChild(option);
            });
        }

        // Load job matches
        async function loadJobMatches() {
            const jobId = document.getElementById('jobSelect').value;
            if (!jobId) return;

            try {
                const response = await fetch(`/match/${jobId}`);
                const data = await response.json();
                
                displayMatchResults(data);
            } catch (error) {
                showNotification('Error loading matches: ' + error.message, 'error');
            }
        }

        // Display match results
        function displayMatchResults(data) {
            const matchResults = document.getElementById('matchResults');
            
            if (!data.matches || data.matches.length === 0) {
                matchResults.innerHTML = '<div class="loading">No matches found for this job</div>';
                return;
            }

            matchResults.innerHTML = `
                <h3>Matches for: ${data.job_title}</h3>
                <p>Found ${data.total_candidates} candidates</p>
                
                ${data.matches.map(match => `
                    <div class="candidate-card">
                        <div class="candidate-name">
                            ${match.candidate_name}
                            <span class="fit-score fit-${getFitClass(match.fit_percentage)}">${match.fit_percentage}% Match</span>
                        </div>
                        
                        ${match.matching_skills.length > 0 ? `
                            <div class="matching-skills">
                                <strong>‚úì Matching Skills:</strong> ${match.matching_skills.join(', ')}
                            </div>
                        ` : ''}
                        
                        ${match.missing_skills.length > 0 ? `
                            <div class="missing-skills">
                                <strong>‚úó Missing Skills:</strong> ${match.missing_skills.join(', ')}
                            </div>
                        ` : ''}
                        
                        <div class="skill-verification">
                            <strong>Skill Details:</strong><br>
                            ${match.skill_details.map(detail => `
                                <div>
                                    ${detail.skill}: 
                                    <span class="verification-status ${detail.verified ? 'verified' : 'unverified'}">
                                        ${detail.verified ? 'Verified' : 'Unverified'}
                                    </span>
                                    (${detail.level})
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // Load candidates for verification
        function loadCandidatesForVerification() {
            const candidateSelect = document.getElementById('verifyCandidate');
            candidateSelect.innerHTML = '<option value="">Choose a candidate...</option>';
            
            candidates.forEach(candidate => {
                const option = document.createElement('option');
                option.value = candidate.candidate_id;
                option.textContent = candidate.name;
                candidateSelect.appendChild(option);
            });
        }

        // Load candidate skills for verification
        function loadCandidateSkills() {
            const candidateId = document.getElementById('verifyCandidate').value;
            const skillSelect = document.getElementById('verifySkill');
            
            skillSelect.innerHTML = '<option value="">Choose a skill...</option>';
            
            if (candidateId) {
                const candidate = candidates.find(c => c.candidate_id === candidateId);
                if (candidate) {
                    candidate.skills.forEach(skill => {
                        const option = document.createElement('option');
                        option.value = skill.name;
                        option.textContent = `${skill.name} (${skill.verified ? 'Verified' : 'Unverified'})`;
                        skillSelect.appendChild(option);
                    });
                }
            }
        }

        // Verify skill
        async function verifySkill() {
            const candidateId = document.getElementById('verifyCandidate').value;
            const skillName = document.getElementById('verifySkill').value;
            
            if (!candidateId || !skillName) {
                showNotification('Please select both candidate and skill', 'error');
                return;
            }

            try {
                const response = await fetch('/verify-skill', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        candidate_id: candidateId,
                        skill_name: skillName,
                        github_username: 'johndoe' // Mock data
                    })
                });

                const result = await response.json();
                displayVerificationResults(result);
                
                if (result.verified) {
                    showNotification('Skill verified successfully!', 'success');
                } else {
                    showNotification('Skill verification failed', 'error');
                }
            } catch (error) {
                showNotification('Error verifying skill: ' + error.message, 'error');
            }
        }

        // Display verification results
        function displayVerificationResults(result) {
            const verificationResults = document.getElementById('verificationResults');
            
            verificationResults.innerHTML = `
                <div class="skill-verification">
                    <h3>Verification Results</h3>
                    <p><strong>Status:</strong> 
                        <span class="verification-status ${result.verified ? 'verified' : 'unverified'}">
                            ${result.verified ? 'Verified' : 'Not Verified'}
                        </span>
                    </p>
                    <p><strong>Confidence:</strong> ${(result.confidence * 100).toFixed(1)}%</p>
                    <p><strong>Level:</strong> ${result.level}</p>
                    <p><strong>Evidence:</strong></p>
                    <ul>
                        ${result.evidence.map(evidence => `<li>${evidence}</li>`).join('')}
                    </ul>
                    <p><strong>Verified on:</strong> ${new Date(result.verification_date).toLocaleString()}</p>
                </div>
            `;
        }

        // Show notification
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = type;
            notification.textContent = message;
            
            document.querySelector('.tab-content.active').insertBefore(notification, document.querySelector('.tab-content.active').firstChild);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', () => {
            loadJobs();
            loadCandidates();
        });
    </script>
</body>
</html> 